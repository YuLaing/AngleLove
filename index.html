<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	
	
	<title>Document</title>
</head>
<body>
<h1>寵物</h1>

<div class=""></div>


<script type="text/javascript">
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }

xmlhttp.open("GET","xml/PET.XML",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML;	
var x=xmlDoc.getElementsByTagName("pet");
xmlhttp.open("GET","xml/PETICON.XML",false);
xmlhttp.send();
xmlDocicon=xmlhttp.responseXML;	
var y=xmlDocicon.getElementsByTagName("icon");
document.write("<table border='1'>");


  //document.body.appendChild(oImg);
 function img_create(src,alt,title){
 	var img=new img('img');
 	img.src=src;
 	if(alt!=null) img.alt=alt;
 	if(title!=null) img.title=title;
 	return img;
 }
 //img_create("icon/Pet/1.bmp");
  //img_create("icon/Pet/1.bmp","","");
  //var img=document.createElement('img');
  //img.src='icon/pet/1.bmp';
  //document.getElementById('peticon_id').appendChild(img);
//var oImg=document.createElement("img");
//var oImg=new Image("img");
//oImg.setAttribute('src','icon/Pet/1.bmp');
//oImg.setAttribute('height','100');
//oImg.setAttribute('width','100');
//oImg.setAttribute('alt','');
//document.body.appendChild(oImg);
var petstr;
var j=0;
var i=0;
for (i=0;i<x.length;i++)
  {

  	var petstr;
  document.write("<tr><td>");
  document.write(x[i].getAttribute("編號"));
  document.write("<tr class='peticon_id"+i+"'><td>");
  //oImg.setAttribute('src','icon/Pet/1.bmp');
  //document.body.appendChild(oImg);
  var img=document.createElement('img');
  petstr1=document.write(x[i].getAttribute("頭像編號"));
  //console.log('pet=',x[i].getAttribute("頭像編號"));
  j=0;
  for (j=0;j<y.length;j++)
  {  //console.log('pet=',x[i].getAttribute("頭像編號"));
     //console.log('pet=',y[i].getAttribute("id"));
     var petstr;
   
  	if(y[j].getAttribute("id")==x[i].getAttribute("頭像編號"))
  	  { petstr=y[j].getAttribute("normal");
        var fPath='icon/Pet/'+petstr+'_1-1.bmp';
        xmlhttp.open("GET",fPath,false);
        xmlhttp.send();
        xmlDocicon=xmlhttp.responseXML;	
      	if(xmlhttp.readyState==4)
      	{
      	if(xmlhttp.status==200) petstr=y[j].getAttribute("normal").toUpperCase();
        else if (xmlhttp.status==404) petstr=y[j].getAttribute("normal").toUpperCase();
      	}
      	else
      	{
      	petstr=y[j].getAttribute("normal").toUpperCase();
      	}
     
      //petstr=petstr.toUpperCase();
      }
     //console.log('pet=',y[j].getAttribute("normal"));
   
  }
 

  //if(parseInt(petstr)<9) { petstr="00"+i;}
  //else if (parseInt(petstr)<99) {petstr="0"+i;}
  //else if (parseInt(petstr)<999) {petstr=i;}
  img.src='icon/Pet/'+petstr+'_1-1.bmp';
  document.querySelector('.peticon_id'+i).appendChild(img);
  //img.src='icon/pet/'+petstr+'-1.bmp';
                                               
  //document.getElementById('peticon_id').appendChild(img);
  document.write("</td><td>");
  document.write(x[i].getAttribute("名稱"));
  document.write("</td><td>");
  document.write(x[i].getAttribute("階段"));
  document.write("</td><td>");
  document.write(x[i].getAttribute("寵物類型"));  
  document.write("</td><td>");
  document.write(x[i].getAttribute("系別")); 
  document.write("</td><td>");
  document.write(x[i].getAttribute("經驗等級表")); 
  document.write("</td><td>");
  document.write(x[i].getAttribute("升階變化1")); 
  document.write("</td><td>");
  document.write(x[i].getAttribute("升階變化2")); 
  document.write("</td><td>");
  document.write(x[i].getAttribute("條件成長值"));   
  document.write("</td><td>");
  document.write(x[i].getAttribute("反應類別表")); 
  document.write("</td><td>");
  document.write(x[i].getAttribute("移動速度")); 
  //document.write(x[i].getElementsByTagName("pet")[0].childNodes[0].nodeValue);
  document.write("</td></tr>");
  }
document.write("</table>");

</script>
<div class="res"></div>
</body>
</html>